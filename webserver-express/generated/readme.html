<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Readme</title>
</head>
<body>
  <h1>Generating a Node/Express Webapp</h1>
  <div>
    <p>
      This readme provides a walkthrough for generating a nicely structured webapp with Node and Express and then also looks at the anatomy of the generated app.
    </p>
    <p>
      We will see how express composes,
      <ul>
        <li>a ready to use webserver,</li>
        <li>some basic middlewares,</li>
        <li>some example routes,</li>
        <li>a template engine for rendering html, and</li>
        <li>some example templates.</li>
      </ul>

    </p>
    <p>
      Before we generate a webapp, we first check the installed versions of node and npm and install/update if needed.
    </p>
    <pre>
      <code>
        node -v
        npm -v
      </code>
    </pre>
    <p>
      Install or update Node and NPM if needed.
      Next, navigate to the folder in which express should generate the webapp. We will create our webapp into this folder.
    </p>
    <pre>
      <code>
        cd /yourpath/examples/
      </code>
    </pre>
      <p>
        We can install the generator globally (for use in other projects).
      </p>
    <pre>
      <code>
    #install express-generator globally (via -v)
    npm install express-generator -g
    </code>
  </pre>
  <p>
    Next, generate the webapp (name it, e.g. express-gen). Note that the cli-command depends on the current path of the prompt.

  </p>
  <pre>
    <code>
        #create app with pug as template engine (cli current folder is parent folder)
        express express-gen --view="pug"

        ##from inside target folder use:
        #express ../generated --view="pug"

        #install dependencies
        cd express-gen
        npm install
      </code>
    </pre>
    <p>
      While NPM installs the dependencies, it also checks for available updates.
      Depending on the output on the terminal it may be advisable to <code>run npm audit</code> and/or <code>run npm audit fix</code> to address security issues with old package versions.
    </p>

    <p>
      We note the response from express on how to start the server: <br />
      <code>DEBUG=nodeserver-express:* npm start</code>. <br />
      Alternatively run the server without debugging via <code>npm start</code> (without setting the environment variable for debugging), using the start script in package.json,<br />
      or use the command from the script <code>node ./bin/www</code> denoted by the startscript in the package.json (entrypoint).
    </p>

    <p>
      After starting the server, the webapp is available via: <a href="http://127.0.0.1:3000/" target="blank">http://127.0.0.1:3000/ </a><br />
      The webapp also has a route defined for: <a href="http://127.0.0.1:3000/users/" target="blank">http://127.0.0.1:3000/users/</a><br />
      We may now continue exploring the generated structures. (...)
    </p>

    <p>
      We can open the generated entrypoint (file) of the application <code>nodeserver-express/bin/www</code> and find out the follwoing about the generated webapp.
    </p>
    <pre>
      <code>
        /**
        * Module dependencies.
        */

        var app = require('../app');

        // ...

        /**
        * Create HTTP server.
        */

        var server = http.createServer(app);

        // ...

      </code>
    </pre>
    <p>
      We here note that the app object is passed to the .createServer()-function.
      It will thus determine the webapps: handle requests, send responses... etc.
      We further note that the app-object is available via the exports variable in '../app.js'.
      This further means we can find out about the '/' and '/users/' paths in the file '../app.js'.
    </p>
    <pre>
      <code>
        // ...
        var express = require('express');

        // ...

        var indexRouter = require('./routes/index');
        var usersRouter = require('./routes/users');

        // ...

        var app = express();


        // ...

        app.use('/', indexRouter);
        app.use('/users', usersRouter);

        // ...

        module.exports = app;

      </code>
    </pre>
    <p>
      We here observe that routes that start with '/' and '/users'
      are handled by the route groups <code>indexRouter</code> and <code>usersRouter</code> respectively.
      Thus one next files to look into is routes/index.js.
    </p>

    <pre>
      <code>
        // ...

        /* GET home page. */
        router.get('/', function(req, res, next) {
          res.render('index', { title: 'Express' });
        });

        // ...
      </code>
    </pre>
    <p>
      We here find how the server response is triggered.
      The webapp here calls the renderer to deliver the html page for the index.xxx-template in the view folder.
    </p>
    <p>
      We are now ready to add middlewares, extend the routes create our own roues.
    </p>
    <p>
      For reference, see the express docs
      <a target="blank" href="https://expressjs.com/de/4x/api.html">https://expressjs.com/de/4x/api.html</a>
      .
    </p>

    <p>
      <b>What's next?</b> For a continued quickstart, check the following list of tutorials and blogs:
    </p>
    <ul>

      <li><a target="blank" href="https://zellwk.com/blog/crud-express-mongodb/">Zell</a>
      develops step-by-step a very basic CRUD application with the express generator and mongodb driver for javascript.</li>
      <li><a target="blank" href="https://closebrace.com/tutorials/2017-03-02/the-dead-simple-step-by-step-guide-for-front-end-developers-to-getting-up-and-running-with-nodejs-express-and-mongodb">Christopher Buecheler</a>
      focusses on setting everything up and also explains how to connect a mongo-database with monk and mongodb.</l>
      <li>The mozilla
      <a target="blank" href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs">
        mdn webdocs</a>
        have chapter on the Express Web Framework. It contains an extensive tutorial and comprehensive background information, including a database connection using mongoose and the final steps for bringing a system to production.</li>
    </ul>


  </div>
</body>
</html>
